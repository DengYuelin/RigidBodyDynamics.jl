<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Simulation · RigidBodyDynamics.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Ubuntu+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="../versions.js"></script></head><body><nav class="toc"><h1>RigidBodyDynamics.jl</h1><form class="search" action="search.html"><select id="version-selector" onChange="window.location.href=this.value"><option value="#" selected="selected" disabled="disabled">Version</option></select><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><a class="toctext" href="quickstart.html">Quick start guide</a></li><li><a class="toctext" href="spatial.html">Spatial vector algebra</a></li><li><a class="toctext" href="joints.html">Joints</a></li><li><a class="toctext" href="rigidbody.html">Rigid bodies</a></li><li><a class="toctext" href="mechanism.html">Mechanism</a></li><li><a class="toctext" href="mechanismstate.html">MechanismState</a></li><li><a class="toctext" href="algorithms.html">Kinematics/dynamics algorithms</a></li><li class="current"><a class="toctext" href="simulation.html">Simulation</a><ul class="internal"><li><a class="toctext" href="#Index-1">Index</a></li><li><a class="toctext" href="#Basic-simulation-1">Basic simulation</a></li><li><a class="toctext" href="#Lower-level-ODE-integration-interface-1">Lower level ODE integration interface</a></li></ul></li><li><a class="toctext" href="benchmarks.html">Benchmarks</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="simulation.html">Simulation</a></li></ul><a class="edit-page" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/docs/src/simulation.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Simulation-1" href="#Simulation-1">Simulation</a></h1><h2><a class="nav-anchor" id="Index-1" href="#Index-1">Index</a></h2><ul><li><a href="simulation.html#RigidBodyDynamics.OdeIntegrators.ButcherTableau"><code>RigidBodyDynamics.OdeIntegrators.ButcherTableau</code></a></li><li><a href="simulation.html#RigidBodyDynamics.OdeIntegrators.ExpandingStorage"><code>RigidBodyDynamics.OdeIntegrators.ExpandingStorage</code></a></li><li><a href="simulation.html#RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator-Tuple{F,RigidBodyDynamics.OdeIntegrators.ButcherTableau{N,T&lt;:Number,L},S&lt;:RigidBodyDynamics.OdeIntegrators.OdeResultsSink}"><code>RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator</code></a></li><li><a href="simulation.html#RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator"><code>RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator</code></a></li><li><a href="simulation.html#RigidBodyDynamics.OdeIntegrators.OdeResultsSink"><code>RigidBodyDynamics.OdeIntegrators.OdeResultsSink</code></a></li><li><a href="simulation.html#RigidBodyDynamics.OdeIntegrators.RingBufferStorage"><code>RigidBodyDynamics.OdeIntegrators.RingBufferStorage</code></a></li><li><a href="simulation.html#Base.step-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Real,Any,Real}"><code>Base.step</code></a></li><li><a href="simulation.html#RigidBodyDynamics.OdeIntegrators.integrate-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Any,Any,Any}"><code>RigidBodyDynamics.OdeIntegrators.integrate</code></a></li><li><a href="simulation.html#RigidBodyDynamics.OdeIntegrators.runge_kutta_4-Tuple{Type{T}}"><code>RigidBodyDynamics.OdeIntegrators.runge_kutta_4</code></a></li><li><a href="simulation.html#RigidBodyDynamics.simulate"><code>RigidBodyDynamics.simulate</code></a></li></ul><h2><a class="nav-anchor" id="Basic-simulation-1" href="#Basic-simulation-1">Basic simulation</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RigidBodyDynamics.simulate" href="#RigidBodyDynamics.simulate"><code>RigidBodyDynamics.simulate</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">simulate(state0, finalTime; Δt)
</code></pre><p>Basic <code>Mechanism</code> simulation: integrate the state from time <span>$0$</span> to <code>finalTime</code> starting from the initial state <code>state0</code>. Return a <code>Vector</code> of times, as well as <code>Vector</code>s of configuration vectors and velocity vectors at these times.</p><p>Uses <code>MuntheKaasIntegrator</code>. See <a href="simulation.html#RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator"><code>MuntheKaasIntegrator</code></a> for a lower level interface with more options.</p></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/simulate.jl#L3">source</a><br/></section><h2><a class="nav-anchor" id="Lower-level-ODE-integration-interface-1" href="#Lower-level-ODE-integration-interface-1">Lower level ODE integration interface</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RigidBodyDynamics.OdeIntegrators.ExpandingStorage" href="#RigidBodyDynamics.OdeIntegrators.ExpandingStorage"><code>RigidBodyDynamics.OdeIntegrators.ExpandingStorage</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">type ExpandingStorage{T} &lt;: RigidBodyDynamics.OdeIntegrators.OdeResultsSink</code></pre><p>An <code>OdeResultsSink</code> that stores the state at each integration time step in <code>Vectors</code> that may expand.</p></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/ode_integrators.jl#L109">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator" href="#RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator"><code>RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator</code></a> — <span class="docstring-category">Type</span>.</div><div><p>A Lie-group-aware ODE integrator.</p><p><code>MuntheKaasIntegrator</code> is used to properly integrate the dynamics of globally parameterized rigid joints (Duindam, Port-Based Modeling and Control for Efficient Bipedal Walking Robots, 2006, Definition 2.9). Global parameterizations of e.g. <span>$SO(3)$</span> are needed to avoid singularities, but this leads to the problem that the tangent space no longer has the same dimension as the ambient space of the global parameterization. A Munthe-Kaas integrator solves this problem by converting back and forth between local and global coordinates at every integration time step.</p><p>The idea is to do the dynamics and compute the stages of the integration scheme in terms of local coordinates centered around the global parameterization of the configuration at the end of the previous time step (e.g. exponential coordinates), combine the stages into a new set of local coordinates as usual for Runge-Kutta methods, and then convert the local coordinates back to global coordinates.</p><p>From <a href="https://hal.archives-ouvertes.fr/hal-01328729">Iserles et al., &#39;Lie-group methods&#39; (2000)</a>.</p><p>Another useful reference is <a href="http://www.ent.mrt.ac.lk/iml/paperbase/TRO%20Collection/TRO/2005/october/7.pdf">Park and Chung, &#39;Geometric Integration on Euclidean Group with Application to Articulated Multibody Systems&#39; (2005)</a>.</p></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/ode_integrators.jl#L183-L203">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator-Tuple{F,RigidBodyDynamics.OdeIntegrators.ButcherTableau{N,T&lt;:Number,L},S&lt;:RigidBodyDynamics.OdeIntegrators.OdeResultsSink}" href="#RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator-Tuple{F,RigidBodyDynamics.OdeIntegrators.ButcherTableau{N,T&lt;:Number,L},S&lt;:RigidBodyDynamics.OdeIntegrators.OdeResultsSink}"><code>RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator</code></a> — <span class="docstring-category">Method</span>.</div><div><p>Create a <code>MuntheKaasIntegrator</code> given:</p><ul><li><p>a callable <code>dynamics!(vd, t, state)</code> that updates the joint acceleration vector <code>vd</code> at time <code>t</code> and in state <code>state</code>;</p></li><li><p>a <a href="simulation.html#RigidBodyDynamics.OdeIntegrators.ButcherTableau"><code>ButcherTableau</code></a> <code>tableau</code>, specifying the integrator coefficients;</p></li><li><p>an <a href="simulation.html#RigidBodyDynamics.OdeIntegrators.OdeResultsSink"><code>OdeResultsSink</code></a> <code>sink</code> which processes the results of the integration procedure at each time step.</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/ode_integrators.jl#L217-L222">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RigidBodyDynamics.OdeIntegrators.OdeResultsSink" href="#RigidBodyDynamics.OdeIntegrators.OdeResultsSink"><code>RigidBodyDynamics.OdeIntegrators.OdeResultsSink</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">abstract OdeResultsSink</code></pre><p>Does &#39;something&#39; with the results of an ODE integration (e.g. storing results, visualizing, etc.). Subtypes must implement:</p><ul><li><p><code>initialize(sink, state)</code>: called with the initial state when integration begins.</p></li><li><p><code>process(sink, t, state)</code>: called at every integration time step with the current state and time.</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/ode_integrators.jl#L58">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RigidBodyDynamics.OdeIntegrators.RingBufferStorage" href="#RigidBodyDynamics.OdeIntegrators.RingBufferStorage"><code>RigidBodyDynamics.OdeIntegrators.RingBufferStorage</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">type RingBufferStorage{T} &lt;: RigidBodyDynamics.OdeIntegrators.OdeResultsSink</code></pre><p>An <code>OdeResultsSink</code> that stores the state at each integration time step in a ring buffer.</p></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/ode_integrators.jl#L70">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.step-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Real,Any,Real}" href="#Base.step-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Real,Any,Real}"><code>Base.step</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-julia">step(integrator, t, state, Δt)
</code></pre><p>Take a single integration step.</p><p><code>state</code> must be of a type for which the following functions are defined:</p><ul><li><p><code>configuration(state)</code>, returns the configuration vector in global coordinates;</p></li><li><p><code>velocity(state)</code>, returns the velocity vector;</p></li><li><p><code>additional_state(state)</code>, returns the vector of additional states;</p></li><li><p><code>set_velocity!(state, v)</code>, sets velocity vector to <code>v</code>;</p></li><li><p><code>set_additional_state!(state, s)</code>, sets vector of additional states to <code>s</code>;</p></li><li><p><code>global_coordinates!(state, q0, ϕ)</code>, sets global coordinates in state based on local coordinates <code>ϕ</code> centered around global coordinates <code>q0</code>;</p></li><li><p><code>local_coordinates!(state, ϕ, ϕd, q0)</code>, converts state&#39;s global configuration <code>q</code> and velocity <code>v</code> to local coordinates centered around global coordinates <code>q0</code>.</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/ode_integrators.jl#L230">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RigidBodyDynamics.OdeIntegrators.integrate-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Any,Any,Any}" href="#RigidBodyDynamics.OdeIntegrators.integrate-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Any,Any,Any}"><code>RigidBodyDynamics.OdeIntegrators.integrate</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-julia">integrate(integrator, state0, finalTime, Δt; maxRealtimeRate)
</code></pre><p>Integrate dynamics from the initial state <code>state0</code> at time <span>$0$</span> to <code>finalTime</code> using step size <code>Δt</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/ode_integrators.jl#L338">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RigidBodyDynamics.OdeIntegrators.runge_kutta_4-Tuple{Type{T}}" href="#RigidBodyDynamics.OdeIntegrators.runge_kutta_4-Tuple{Type{T}}"><code>RigidBodyDynamics.OdeIntegrators.runge_kutta_4</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-julia">runge_kutta_4(scalartype)
</code></pre><p>Return the Butcher tableau for the standard fourth order Runge-Kutta integrator.</p></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/ode_integrators.jl#L44">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RigidBodyDynamics.OdeIntegrators.ButcherTableau" href="#RigidBodyDynamics.OdeIntegrators.ButcherTableau"><code>RigidBodyDynamics.OdeIntegrators.ButcherTableau</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">immutable ButcherTableau{N, T&lt;:Number, L}</code></pre><p>A <a href="https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Explicit_Runge.E2.80.93Kutta_methods">Butcher tableau</a>.</p></div><a class="source-link" target="_blank" href="https://github.com/tkoolen/RigidBodyDynamics.jl/tree/dd7dcc2a60b9a9ef57ccc5a44020a8490400d129/src/ode_integrators.jl#L19">source</a><br/></section><footer><hr/><a class="previous" href="algorithms.html"><span class="direction">Previous</span><span class="title">Kinematics/dynamics algorithms</span></a><a class="next" href="benchmarks.html"><span class="direction">Next</span><span class="title">Benchmarks</span></a></footer></article></body></html>
